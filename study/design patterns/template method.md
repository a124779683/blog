# 模板代码
>模板方法模式是类的行为模式。**准备一个抽象类，将部分逻辑以具体方法以及具体构造函数的形式实现，然后声明一些抽象方法来迫使子类实现剩余的逻辑**。不同的子类可以以不同的方式实现这些抽象方法，从而对剩余的逻辑有不同的实现。这就是模板方法模式的用意。--阎宏博士的《JAVA与模式》  

模板方法定义了一系列算法步骤，子类可以去实现其中某些步骤，但不能改变这些步骤的执行顺序，like AsyncTask,Servelet.

## 使用模板代码的优势
使用模板代码可以让我们少写一些重复的代码，因为使用了继承，这也使我们的代码客观上遵循了DRY（Do not repeat yourself）原则，更加利于维护 和 扩展，我们在工作时可以专注的去完成子类的责任即可，可不用关心具体的算法。

## 模板代码的缺点
模板代码可以导致子类泛滥的问题，比如过年回家乘车的例子，回家的交通工具如果有成千上万就意味着我们需要写非常多的子类。为了解决这个问题，我们也通过[回调][callback]的方式来避免这种情况的发生，通过匿名内部类的方式在不同的地方实现不同的逻辑接口来避免子类泛滥的问题。

## 模板代码的实现方式
模板模式的关键是：子类可以置换掉父类的可变部分，但是子类却不可以改变模板方法所代表的顶级逻辑。  

每当定义一个新的子类时，不要按照控制流程的思路去想，而应当按照“责任”的思路去想。换言之，应当考虑哪些操作是必须置换掉的，哪些操作是可以置换掉的，以及哪些操作是不可以置换掉的。**使用模板模式可以使这些责任变得清晰**。

### 模板方法模式中的方法
模板方法中的方法可以分为两大类：模板方法和基本方法。  

*模板方法：*  
一个模板方法是定义在抽象类中的，把基本操作方法组合在一起形成一个总算法或一个总行为的方法。一个抽象类可以有任意多个模板方法，而不限于一个。每一个模板方法都可以调用任意多个具体方法。
 
*基本方法：*  
基本方法又可以分为三种：抽象方法(Abstract Method)、具体方法(Concrete Method)和钩子方法(Hook Method)。

* 抽象方法：一个抽象方法由抽象类声明，由具体子类实现。在Java语言里抽象方法以abstract关键字标示。
* 具体方法：一个具体方法由抽象类声明并实现，而子类并不实现或置换。
* 钩子方法：一个钩子方法由抽象类声明并实现，而子类会加以扩展。通常抽象类给出的实现是一个空实现，作为方法的默认实现。

　　在上面的例子中，AbstractTemplate是一个抽象类，它带有三个方法。其中abstractMethod()是一个抽象方法，它由抽象类声明为抽象方法，并由子类实现；hookMethod()是一个钩子方法，它由抽象类声明并提供默认实现，并且由子类置换掉。concreteMethod()是一个具体方法，它由抽象类声明并实现。  

*默认钩子方法*

　　一个钩子方法常常由抽象类给出一个空实现作为此方法的默认实现。这种空的钩子方法叫做“Do Nothing Hook”。显然，这种默认钩子方法在缺省适配模式里面已经见过了，一个缺省适配模式讲的是一个类为一个接口提供一个默认的空实现，从而使得缺省适配类的子类不必像实现接口那样必须给出所有方法的实现，因为通常一个具体类并不需要所有的方法。

## Code
抽象类

	public abstract class AbstractTemplate {

   	 	/**
    	 * 模板方法
    	 */
    	public void templateMethod(){
        //调用基本方法
    	 abstractMethod();
       	 hookMethod();
       	 concreteMethod();
		}

	    /**
	     * 抽象方法
	     */
	    protected abstract void abstractMethod();
	
	    /**
	     * 钩子方法
	     */
	    protected void hookMethod(){}
	
	    /**
	     * 具体方法
	     */
	    private final void concreteMethod(){
	        //业务相关的代码
	    }
	}



具体实现类

	public class ConcreteTemplate extends AbstractTemplate{

	    //基本方法的实现
	    @Override
	    public void abstractMethod() {
	        //业务相关的代码
	    }

	    //重写父类的方法
	    @Override
	    public void hookMethod() {
	        //业务相关的代码
	    }
	}



[callback]:http://www.baidu.com (回调)